function nativeShare(e,i){if(!document.getElementById(e))return console.error(new Error("\u6ca1\u6709\u627e\u5230id\u4e3a\uff1a"+e+" \u7684\u5143\u7d20")),!1;var t=navigator.appVersion,s=t.split("MQQBrowser/").length>1?2:0,n=t.split("UCBrowser/").length>1?1:0,a={uc:"",qq:""},r=!1,o="nativeShareBox";i=i||{},this.elementNode=e,this.url=i.url||document.location.href||"",this.title=i.title||document.title||"",this.desc=i.desc||document.title||"",this.img=i.img||document.getElementsByTagName("img").length>0&&document.getElementsByTagName("img")[0].src||"",this.img_title=i.img_title||document.title||"",this.from=i.from||window.location.host||"",this.ucAppList={sinaWeibo:["kSinaWeibo","SinaWeibo",11,"\u65b0\u6d6a\u5fae\u535a"],weixin:["kWeixin","WechatFriends",1,"\u5fae\u4fe1\u597d\u53cb"],weixinFriend:["kWeixinFriend","WechatTimeline","8","\u5fae\u4fe1\u670b\u53cb\u5708"],QQ:["kQQ","QQ","4","QQ\u597d\u53cb"],QZone:["kQZone","QZone","3","QQ\u7a7a\u95f4"]},this.share=function(e){var i=this.title,t=this.url,a=this.desc,o=this.img,l=this.img_title,d=this.from;if(n)"QZone"==(e=""==e?"":"iPhone"==platform_os?this.ucAppList[e][0]:this.ucAppList[e][1])&&(B="mqqapi://share/to_qzone?src_type=web&version=1&file_type=news&req_type=1&image_url="+o+"&title="+i+"&description="+a+"&url="+t+"&app_name="+d,k=document.createElement("div"),k.style.visibility="hidden",k.innerHTML='<iframe src="'+B+'" scrolling="no" width="1" height="1"></iframe>',document.body.appendChild(k),setTimeout((function(){k&&k.parentNode&&k.parentNode.removeChild(k)}),5e3)),"undefined"!=typeof ucweb?ucweb.startRequest("shell.page_share",[i,i,t,e,"","@"+d,""]):"undefined"!=typeof ucbrowser&&ucbrowser.web_share(i,i,t,e,"","@"+d,"");else if(s&&!r){var c={url:t,title:i,description:a,img_url:o,img_title:l,to_app:e=""==e?"":this.ucAppList[e][2],cus_txt:"\u8bf7\u8f93\u5165\u6b64\u65f6\u6b64\u523b\u60f3\u8981\u5206\u4eab\u7684\u5185\u5bb9"};c=""==e?"":c,"undefined"!=typeof browser?void 0!==browser.app&&2==s&&browser.app.share(c):void 0!==window.qb&&1==s&&window.qb.share(c)}},this.html=function(i){var t=document.getElementById(e)||document.getElementsByTagName("body")[0];if(1===i)var s='<div id="nativeShare"><div class="label"><span class="title">\u5206\u4eab\u81f3\uff1a</span><span class="close"></span></div><div class="list clearfix"><span data-app="sinaWeibo" class="nativeShare weibo"><i></i>\u65b0\u6d6a\u5fae\u535a</span><span data-app="weixin" class="nativeShare weixin"><i></i>\u5fae\u4fe1\u597d\u53cb</span><span data-app="weixinFriend" class="nativeShare weixin_timeline"><i></i>\u5fae\u4fe1\u670b\u53cb\u5708</span><span data-app="QQ" class="nativeShare qq"><i></i>QQ\u597d\u53cb</span><span data-app="QZone" class="nativeShare qzone"><i></i>QQ\u7a7a\u95f4</span><span data-app="" class="nativeShare more"><i></i>\u66f4\u591a</span></div></div>';else s=2===i?'<div class="closewx"><div id="nativeShare"><div class="label"><span class="title">\u5206\u4eab\u81f3\uff1a</span><span class="close"></span></div><div class="list clearfix"><div class="intro">\u957f\u6309\u590d\u5236\u4e0b\u65b9\u94fe\u63a5\uff0c\u53bb\u7c98\u8d34\u7ed9\u597d\u53cb\u5427\uff1a</div><a href="'+this.url+'" target="_blank"><div class="url"><span>'+this.url+"</span></div></a></div></div></div>":'<div class="closewx"><div class="wxshare"></div></div>';var n=document.getElementById(o);n&&n.remove();var a=document.createElement("div");a.id=o,a.innerHTML=s,t.appendChild(a),this.bindEvents()},this.bindEvents=function(){var e=document.querySelectorAll("#nativeShare .close, #"+o+" .closewx"),i=this;e.forEach((function(e){e.addEventListener("click",(function(e){e.target===e.currentTarget&&(i.hide(),e.stopPropagation())}))}))},this.show=function(){document.getElementById(o).style.display="block"},this.hide=function(){document.getElementById(o).style.display="none"},this.isloadqqApi=function(){if(s){var e=a.qq<5.4?"//3gimg.qq.com/html5/js/qb.js":"//jsapi.qq.com/get?api=app.share",i=document.createElement("script"),t=document.getElementsByTagName("body")[0];i.setAttribute("src",e),t.appendChild(i)}},this.getPlantform=function(){return ua=navigator.userAgent,ua.indexOf("iPhone")>-1||ua.indexOf("iPod")>-1?"iPhone":"Android"},this.is_weixin=function(){return"micromessenger"==t.toLowerCase().match(/MicroMessenger/i)},this.getVersion=function(e){var i=e.split(".");return parseFloat(i[0]+"."+i[1])},this.is_innerQQ=function(){return"QQ/"==t.match(/QQ\//i)},this.init=function(){platform_os=this.getPlantform(),a.qq=s?this.getVersion(t.split("MQQBrowser/")[1]):0,a.uc=n?this.getVersion(t.split("UCBrowser/")[1]):0,r=this.is_weixin(),this.is_innerQQ(),s&&a.qq<5.4&&"iPhone"==platform_os||s&&a.qq<5.3&&"Android"==platform_os?s=0:s&&a.qq<5.4&&"Android"==platform_os?s=1:n&&(a.uc<10.2&&"iPhone"==platform_os||a.uc<9.7&&"Android"==platform_os)&&(n=0),this.isloadqqApi(),this.html(!s&&!n||r?r?3:2:1)},this.init();for(var l=this,d=document.getElementsByClassName("nativeShare"),c=0;c<d.length;c++)d[c].onclick=function(){l.share(this.getAttribute("data-app"))};return this}